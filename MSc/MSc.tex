\documentclass[12pt,a4paper]{article}
 
%Ustawienia strony A4:
\setlength{\textheight}{23cm}  \setlength{\textwidth}{15.92cm} \setlength{\footskip}{10mm} \setlength{\oddsidemargin}{5mm} \setlength{\evensidemargin}{5mm} \setlength{\headsep}{5mm}

\linespread{1.45} 

 \parskip 7.2pt           % sets spacing between paragraphs

 \providecommand{\e}[1]{\ensuremath{\times 10^{#1}}}

\usepackage{polski}
\usepackage[cp1250]{inputenc} 
\usepackage{array}
\usepackage{tikz}
\usepackage{graphicx}
\usepackage{amsfonts}
\usepackage{multirow}
\usepackage{mathtools}
\usepackage{amsmath}
\usepackage{float}
\usepackage{nomencl}
\usepackage{hyperref}

\makenomenclature
\usetikzlibrary{shapes,arrows}

\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhead{}
\fancyfoot{}
\fancyhead[LE,LO]{£akomy T. - Praca magisterska}
\fancyfoot[C]{\thepage}
\setcounter{tocdepth}{2}

\title{Praca magisterska \\ Aplikacja do pomiarów parametrów ³¹cza sieciowego dla urz¹dzeñ z systemem operacyjnym Android}
\author{Tomasz £akomy}
\date{}

 
\begin{document}
\maketitle
\newpage

\section*{}
{\Large \textbf{Streszczenie}}

{\Large \textbf{Abstract}}


\newpage

\nomenclature{LTE}{Long Term Evolution}
\nomenclature{UMTS}{Universal Mobile Telecommunications System}
\nomenclature{GSM}{Global System for Mobile Communications}
\renewcommand{\nomname}{S³ownik skrótów i akronimów}
\makenomenclature
\printnomenclature[2.5cm]

\newpage
%Spis treœci
\tableofcontents

%Pierwszy rozdzia³ - Wstêp
\newpage
\section{Wstêp}

\newpage
\section{Transmisja danych w sieciach komórkowych}

\subsection{GSM i EDGE}
\subsubsection{GSM}
\qquad GSM (ang. \textit{Global System for Mobile Communications}) jest standardem telefonii komórkowej, który powsta³ dziêki europejskiej inicjatywie stworzenia jednego, otwartego standardu telefonii komórkowej. Jest to najstarsza wykorzystywana dziœ technologia radiokomunikacji ruchomej, na obszarze europejskim rozpoczêto uruchamianie GSM w roku 1989, rok po opublikowaniu pierwszej wersji standardu. Polska na uruchomienie pierwszej sieci GSM czeka³a kolejne 7 lat, zosta³a ona uruchomiona w roku 1996.

\qquad GSM jest aktualnie najpowszchniej wykorzystywanem standardem telefonii komórkowej na œwiecie, jest on dostêpny w 219 pañstwach. Pierwotnie by³ to standard pozwalaj¹cy jedynie na transmisje mowy, jednak¿e po latach ewolucji pojawi³y siê bazuj¹ce na GSM technologie transmisji danych takie jak GPRS (ang. \textit{General Packet Radio Service}) czy jego nastêpca, EDGE (ang. \textit{Enchanced Data Rules for GSM evolution}). W przypadku, gdy u¿ytkownik terminala mobilnego wybra³ korzystanie np. z sieci LTE (ang. \textit{Long Term Evolution}) do transmisji danych i z jakiœ powodów transmisja ta nie jest mo¿liwa (przyk³adowo z powodu zbyt s³abego zasiêgu sieci LTE), transmisja mo¿e byæ przeprowadzona za pomoc¹ technologii EDGE, która jest dostêpna niemal¿e wszêdzie tam, gdzie dostêpna jest sieæ GSM.

\begin{table}[h!]
	\begin{center}
		\begin{tabular}{ | l | p{4cm} | p{4cm} | p{3cm} | }
		\hline
		\textbf{Standard} & \textbf{Czêstotliwoœci wykorzystywane w ³¹czu w górê [MHz]} & \textbf{Czêstotliwoœci wykorzystywane w ³¹czu w dó³ [MHz]} & \textbf{Liczba dostêpnych pasm czêstotliwoœci} \\ \hline
		GSM 400 & 450.4 - 457.6
lub 478.8 - 486 & 460.4 - 467.6
lub 488.8 - 496 & 35 \\ \hline
		GSM 850 & 824 - 849 & 869 - 894 & 124 \\ \hline
		GSM 900 & 880 - 915 & 925 - 960 & 174 \\ \hline
		GSM 1800 & 1710 - 1785 & 1805 - 1880 & 374 \\ \hline
		GSM 1900 & 1850 - 1910 & 1930 - 1990 & 299 \\ \hline
		\end{tabular}
		\caption{Tabela porównuj¹ca standardy sieci GSM}
		\label{tab:GSM_standards}
	\end{center}
\end{table}

\qquad Istnieje piêæ g³ównych standardów sieci GSM, ró¿ni¹cych siê od siebie wykorzystywanym pasmem radiowym oraz liczb¹ dostêpnych pasm czêstotliwoœci, co przedstawia tabela \ref{tab:GSM_standards}

\qquad Na terenie Unii Europejskiej u¿ywany jest standard GSM 900/1800, który polega na uruchomieniu obu sieci jednoczeœnie na danym obszarze. Na terenach, gdzie spodziewany ruch jest niezbyt du¿y (np. tereny wiejskie) uruchamiana jest tylko sieæ GSM 900, jednak¿e w miastach, gdzie ruch ten jest zdecydowanie wiêkszy, dodatkowo wdra¿any jest tak¿e standard GSM 1800, który dziêki wiêkszej liczbie jednoczeœnie oferowanych czêstotliwoœci jest w stanie obs³u¿yæ wiêkszy ruch. 

\qquad Aktualnie niemal¿e wszystkie telefony komórkowe pozwalaj¹ na pracê w obydwu zakresach czêstotliwoœci, co sprawia, ¿e u¿ytkownik nie musi siê obawiaæ o utratê zakresu np. sieci GSM 1800. GSM zak³ada mo¿liwoœæ rozmowy w trakcie przemieszczania siê pomiêdzy stacjami bazowymi.

\subsubsection{EDGE}
\qquad Standard EDGE (ang. \textit{Enhanced Data Rates for GSM Evolution}) powsta³ jako odpowiedŸ na zapotrzebowanie u¿ytkowników na wiêksze ni¿ w przypadku GPRS prêdkoœci transmsji danych pakietowych. Obecnie jest to najbardziej postawowa technika przesy³ana danych w sieciach komórkowych, wykorzystywana, gdy sieci UMTS oraz LTE nie s¹ dostêpne.

\qquad Zarówno EDGE jak i GPRS dzia³aj¹ na bazie istniej¹cej infrastruktury sieci komórkowej, wiêc wdro¿enie ich nie stwarza³o koniecznoœci budowania nowej sieci radiowej. EDGE nie oferowa³ nowych us³ug, ale za to oferowa³ u¿ytkownikom mo¿liwoœci dostarczania takich us³ug jak Internet, korzystanie z transmisji strumieniowych audio/video czy te¿ wideorozmowy.

\qquad W systemie GSM, transmisja jest zorganizowana na pasmach o szerokoœci 200 kHz, a czas podzielony jest na 8 kolejno nastêpuj¹cych szczelin czasowych, z których ka¿da trwa 577 mikrosekund. Szczeliny se t¹ ponumerowane od 1 do 8 i nastêpuj¹ cyklicznie. W przypadku transmisji mowy, kontroler stacji bazowej przypisuje terminalowi mobilnemu jedn¹ szczelinê czasow¹ na czêstotwliwoœci u¿ywanej to transmisji. Oznacza to, ¿e na 1 czêstotliwoœci mo¿na jednoczeœnie prowadziæ do 8 rozmów telefonicznych.

\qquad Ze wzglêdu na to, ¿e EDGE zosta³ zbudowany jako rozszerzenie standardu GSM, wykorzystuje on szczeliny czasowe na potrzeby transmisji danych. W przeciwieñstwie do transmisji mowy, nie odbywa siê rezerwacja szczelin czasowych na ca³y czas korzystania z sieci pakietowej (np. w trakcie przegl¹dania stron internetowych na telefonie komórkowym) - szczelina czasowa jest rezerwowana tylko na potrzeby przes³ania danej paczki pakietów danych. Teoretycznie w sieci EDGE mo¿liwe jest rezerwowanie wszystkich 8 szczelin czasowych na potrzeby transmisji pakietów, jednak¿e w praktyce rezerwuje siê do 4 szczelin dla transmisji od terminala mobilnego i 5 szczelin dla transmisji w kierunku terminala. Wszystkie rezerwowane szczeliny dla danej transmisji musz¹ znajdowaæ siê na tej samej czêstotliwoœci.

\qquad EDGE dla celów modulacji danych wykorzystuje modulacje GMSK (podobnie jak GSM dla transmisji mowy), jednak¿e mo¿liwe jest tak¿e wykorzystanie nowszego rozwi¹zania, jakim jest modulacja 8-PSK (ang. \textit{8 Phase Shift Keying}), która oferuje wiêksz¹ przep³ywnoœæ, kosztem wra¿liwoœci na warunki transmisji. EDGE zak³ada 9 ró¿nych schematów transmisji, z których ka¿dy charakteryzuje siê inn¹ szybkoœci¹ danych, co wynika z zastosowanej modulacji oraz iloœci zastosowanych nadmiarowych danych (tzw. \textit{code rate}). Tabela \ref{tab:EDGE_transmission_scheme} przedstawia mo¿liwe schematy transmisji. Schematy transmisji s¹ podzielne na trzy rodziny A, B i C, których zastosowanie sprowadza siê do tego, ¿e gdy warunki dla przeprowadzenia danej transmisji s¹ nieodpowiednie, wybierany jest inny schemat transmisji pochodz¹cy z danej rodziny.

\begin{table}[h!]
	\begin{center}
		\begin{tabular}{ | l | l | l | l | l | }
		\hline
		\textbf{Schemat} & \textbf{Code rate} & \textbf{Modulacja} & \textbf{Transfer} & \textbf{Rodzina}\\ \hline
		MCS-1 & 0.53 & GMSK & 8.8 kbit/s & C\\ \hline
		MCS-2 & 0.66 & GMSK & 11.2 kbit/s & B\\ \hline
		MCS-3 & 0.85 & GMSK & 14.8 kbit/s & A\\ \hline
		MCS-4 & 1 & GMSK & 17.6 kbit/s & C\\ \hline
		MCS-5 & 0.37 & 8-PSK & 22.4 kbit/s & B\\ \hline
		MCS-6 & 0.49 & 8-PSK & 29.6 kbit/s & A\\ \hline
		MCS-7 & 0.76 & 8-PSK & 47.8 kbit/s & B\\ \hline
		MCS-8 & 0.92 & 8-PSK & 54.4 kbit/s & A\\ \hline
		MCS-9 & 1 & 8-PSK & 59.2 kbit/s & A\\ \hline
		\end{tabular}
		\caption{Tabela przedstawiaj¹ca schematy transmisji w sieci EDGE}
		\label{tab:EDGE_transmission_scheme}
	\end{center}
\end{table}


\qquad Z powy¿szej tabeli wynika, ¿e maksymaln¹ prêdkoœc transmisji mo¿na osi¹gn¹æ wybieraj¹c schemat MCS-9, który przy zastosowaniu 5 szczelin czasowych umo¿liwa transmisjê do 296 kilobitów na sekundê. W praktyce prêdkoœæ ta jest zdecydowanie ni¿sza, ze wzglêdu na warunki panuj¹ce w kanale radiowym.

\subsection{UMTS i HSDPA}
\subsubsection{UMTS}

\qquad UMTS (ang. \textit{Universal Mobile Telecommunications System}), jest to standard sieci komórkowej trzeciej generacji bêd¹cy nastêpc¹ systemu GSM. UMTS zosta³ zbudowany na bazie GSM, co oznacza, ¿e nie zak³ada on zmian w sieci szkieletowej, jednak¿e wprowadzono gruntowne zmiany w sieci radiowej. Dziêki tym zmianiom (takim jak zaimplementowanie technologii HSDPA - ang. \textit{High Speed Downlink Packet Access}) uda³o siê uzyskaæ prêdkoœci transmisji danych pakietowych dochodz¹ce do 21.6 Mbit/s w transmisji w ³¹czu w górê, oraz do 5.76 Mbit/s w ³¹czu w dó³.

\qquad Prêdkoœci transmisji danych w sieciach trzeciej generacji s¹ zdecydowanie wiêksze od prêdkoœci mierzonych w sieciach poprzedniej generacji ze wzglêdu na rosn¹ce zapotrzebowanie u¿ytkowników na korzystanie z us³ug internetowych w terminalach mobilnych. W czasach, gdy strumieniowanie filmów w wysokiej rozdzielczoœci przez Internet jest po¿¹dan¹ przez u¿ytkowników telefonów komórkowych funkcjonalnoœci¹, EDGE nie jest wystarczaj¹cy dla zaspokojenia ich potrzeb.

\qquad W dzisiejszych czasach UMTS jest najpopularniejsz¹ sieci¹ komórkow¹ trzeciej generacji, a polscy operatorzy komórkowi objeli jej zasiêgiem niemal¿e ca³y kraj. \cite{[4]}\cite{[5]}\cite{[6]}\cite{[7]}

\begin{figure}[!htbp]
	\centering
	\includegraphics[scale=0.8,natwidth=701,natheight=600]{t_mobile_zasieg.jpg}
	\caption{Zasiêg sieci 3G operatora T-Mobile w wrzeœniu 2015 roku}
	\label{fig:t_mobile_coverage}
\end{figure}

\subsubsection{WCDMA}
\qquad WCDMA (ang. \textit{Wideband Code Division Multiple Access}) jest to technika szybkiego przesy³ania danych pakietowych zaimplementowana w standardzie UMTS. Pierwszy raz zosta³a ona zaimplementowana w 2001 roku, a aktualnie jest to najpopularniejsze rozwi¹zanie stosowane w sieciach 3G, oferuj¹ce prêdkoœci transmisji danych do 384 kbit/s.

\qquad WCDMA bazuje na technice wielodostêpu z podzia³em kodowym (CDMA - \textit{Code Division Multiple Access}), spotykanej w systemach z poszerzonym widmem \cite{[2]}. W przeciwieñstwie do GSM/EDGE, nie istnieje tutaj pojêcie pasm czêstotliwoœci przydzielanych dla danej transmisji. Zamiast tego, wszystkie transmisje odbywaj¹ siê na wspólnym szerokim paœmie, wykorzystywanym przez wszystkich u¿ytkowników jednoczeœnie. W specyfikacji standardu szerokoœæ tego pasma wynosi 4.68 MHz, w praktyce jednak wykorzystuje siê pasmo 5 MHz, aby zminimalizowaæ efekty interferencji z innymi jednoczeœnie odbywaj¹cymi siê transmisjami.

\qquad W systemach wykorzystuj¹cych CDMA, transmisje pochodz¹ce od poszczególnych u¿ytkowników sieci s¹ przetwarzane w nadajniku za pomoc¹ wyznaczonych kodów, które poszerzaj¹ pasmo nadawanego sygna³u. Dziêki temu mo¿na umieœciæ wiele transmisji na jednakowym paœmie, kody te s¹ ortogonalne wobec siebie, tak wiêc mo¿liwe jest wyobrêbnienie danego sygna³u w odbiorniku spoœród wielu innych, jednoczeœnie nadawanych. Ponadto, ci¹gi danych s¹ modulowane z zastosowaniem modulacji cyfrowej QPSK, co tak¿e poprawia odpornoœæ transmisji na b³êdy.

\subsubsection{HSDPA}
\qquad HSDPA (ang. \textit{High Speed Downlink Packet Access}) pojawi³o siê ze wzglêdu na wci¹¿ rosn¹ce zapotrzebowanie na szybk¹ transmisjê danych, prêdkoœci oferowane przez WCDMA nie by³y ju¿ wystarczaj¹ce dla u¿ytkowników XXI wieku. Technologia ta powsta³a na bazie WCDMA, co sprawia, ¿e operatorzy komórkowi przy jej wdra¿aniu nie musza ponosiæ kosztów zwi¹zanych z wymian¹ sieci szkieletowej, a jedyne zmiany dotycz¹ sieci radiowej.

\qquad System HSDPA oferuje prêdkoœci transmisji siêgaj¹ce 21.6 Mbit/s w ³¹czu w dó³. Tak du¿¹ prêdkoœc transmisji danych uda³o siê osi¹gn¹æ poprzez m.in. zastosowanie modulacji 16QAM (gdy warunki panuj¹ce w kanale radiowym na to pozwalaj¹, ze wzglêdu na to, ¿e modulacja ta jest bardziej wra¿liwa na zak³ócenia ni¿ QPSK), wyodrêbnienie osobnego kana³u transportowego dla transmisji w ³¹czu w dó³ - HS-DSCH (\textit{High Speed Downlink Shared Channel}), oraz dziêki zmniejszeniu okresu, w którym przesy³ana jest ramka danych, co pozwala na lepsze reagowanie na zmieniaj¹ce siê w czasie w³aœciwoœci kana³u radiowego.

\subsection{LTE}
\qquad Technologia LTE (ang. \textit{Long Term Evolution}) powsta³a jako odpowiedŸ konsorcjum 3GPP (ang. \textit{3rd Generation Partnership Project}) na rosn¹ce zapotrzebowanie u¿ytkowników na przepustowoœæ ³¹cza danych. Z racji tego, ¿e jest ona nastêpc¹ takich rozwi¹zañ telekomunikacyjnych jak WCDMA i HSPA bywa ona bardzo czêsto omy³kowo nazywana "technologi¹ 4G", co nie jest do koñca prawd¹. W tym miejscu warto zaznaczyæ, ¿e pomimo wielu nieprawdziwych informacji docieraj¹cych z mediów standard LTE nie spe³nia wymogów stawianych przez ITU dla technologii 4G/IMT-Advanced. Wymogi te spe³nia dopiero nastêpca standardu LTE o nazwie LTE-Advanced.

\qquad Pierwsz¹ implementacjê standardu opisuje dokument 3GPP LTE Release 8, opublikowany w grudniu 2008 roku. Opisano w nowy standard oraz przedstawiono jego specyfikacjê. Kolejny dokument (Release 9) zosta³ wydany rok póŸniej, a wydanie Release 10 zawieraj¹cego opis LTE-Advanced pozwoli³o 3GPP na spe³nienie wymagañ dotycz¹cych sieci 4G. W Release 8 zosta³y opisane podstawowe w³aœciwoœci systemu LTE, które przedstawiono w tabeli 

\begin{table}[h!]
	\begin{center}
		\begin{tabular}{ | l | l |}
		\hline
		\textbf{Parametr} & \textbf{Standard LTE } \\ \hline
		Max przep³ywnoœæ - ³¹cze w dó³ & 300 Mb/s \\ \hline
		Maksymalna przep³ywnoœæ - ³¹czê w górê & 50Mb/s \\ \hline
		Maksymalne opóŸnienie pakietu & ok. 10ms  \\ \hline
		Wykorzystana metoda wielodostêpu - downlink & OFDMA \\ \hline
		Wykorzystana metoda wielodostêpu - uplink & SC-FDMA \\ \hline
		\end{tabular}
		\caption{Podstawowe w³aœciwoœci systemu LTE}
		\label{LTE_requirements}
	\end{center}
\end{table}



Aby uzyskaæ w³aœciwoœci systemu przedstawione w tabeli \ref{LTE_requirements} wykorzystano szereg technik: 

\begin{itemize}
  \item \textbf{MIMO} (\textit{Multiple Input Multiple Output}) - technika umo¿liwiaj¹ca korzystanie z wielu anten zarówno po stronie nadawczej jak i odbiorczej.
  \item \textbf{SC-FDMA} (\textit{Single Carrier – Frequency Division Multiple Access}) - metoda wielodostêpu stosowana w ³¹czu w górê pozwalaj¹ca u¿ytkownikom na wspó³dzielenie zasobów czasowo-czêstotliwoœciowych.
  \item \textbf{HARQ} (\textit{Hybrid Automatic Repeat reQuest}) - protokó³ polegaj¹cy na retransmisji danych w przypadku wyst¹pienia trudnych warunków propagacyjnych.
  \item \textbf{OFDM} (\textit{Orthogonal Frequency Division Multiplexing}) - modulacja stosowana w ³¹czu w dó³, polegaj¹ca na transmisji na wielu podnoœnych, które s¹ wzglêdem siebie ortogonalne.
  \item \textbf{SAE} (\textit{System Architecture Evolution}) - poprawienie struktury szkieletowej sieci, która jest ³atwa w modyfikacji i dopasowana do potrzeb przysz³ego standardu LTE-Advanced.
  \item \textbf{SON} (\textit{Self-Organizing Networks}) - rozwi¹zania pozwalaj¹ce na samokonfiguracjê oraz samooptymalizacjê sieci LTE.
\end{itemize}



\newpage
\section{Transmisja danych w Internecie}
\subsection{Protokó³ TCP}
\qquad Protokó³ TCP (ang. \textit{Transmission Control Protocol}) jest po³¹czeniowym, niezawodnym, strumieniownym protoko³em stanowi¹cym podstawê dzia³ania dzisiejszego Internetu. Jest to protokó³ czwartej warstwy modelu OSI. Po raz pierwszy zosta³ on zdefiniowany w dokumencie RFC 793 z 1981 roku zatytu³owanym "\textit{Transmission Control Protocol. Darpa Internet Program protocol specification}" \cite{[8]}. 

\qquad Protokó³ TCP jest czêsci¹ stosu TCP/IP, korzystaj¹cego z protoko³u IP (ang. \textit{Internet Protocol}) do przeprowadzania bezb³ednej transmisji danych w obu kierunkach.

\subsection{Protokó³ HTTP}

\newpage
\section{Opis realizacji programowej}

\subsection{Za³o¿enia projektowe}

\qquad Celem pracy jest stworzenie œrodowiska pomiarowego do pomiaru czasu transmisji danych w sieciach komórkowych pod k¹tem zastosowania tych sieci w systemach pomiarowych. W tym celu nale¿a³o opracowac aplikacjê dla urz¹dzeñ z systemem Android, a tak¿e dedykowane dla niej serwery napisane w jêzyku Python. Serwery te umo¿liwiaj¹ komunikacjê z aplikacj¹ zainstalowan¹ na terminalu mobilnym z wykorzystaniem zapytañ HTTP jak i za pomoc¹ gniazd protoko³u TCP/IP.

\qquad Nale¿a³o dokonaæ pomiaru dla nieruchomego terminala mobilnego oraz dla terminala, którego u¿ytkownik pozostaje w ruchu. Przy za³o¿eniu, ¿e aplikacja posiada dwa mo¿liwe sposoby komunikacji, oznacza to cztery mo¿liwe sposoby przeprowadzania pomiaru:

\begin{itemize}
  \item Pomiar terminala nieruchomego z wykorzystaniem zapytañ HTTP
  \item Pomiar terminala nieruchomego z wykorzystaniem protko³u TCP/IP
  \item Pomiar terminala przemieszczaj¹cego siê z wykorzystaniem zapytañ HTTP
  \item Pomiar terminala przemieszczaj¹cego siê z wykorzystaniem protko³u TCP/IP
\end{itemize}

\qquad Aplikacja posiada tak¿e mo¿liwoœæ wyboru pracy sieci telefonu komórkowego, wybór ten przedstawia siê nastêpuj¹co:

\begin{itemize}
  \item LTE/WCDMA/GSM (automatyczne po³¹czenie)
  \item WCDMA/GSM (automatyczne po³¹czenie)
  \item Tylko WCDMA
  \item Tylko GSM
\end{itemize}

\qquad Pojedyñczym pomiarem nazywamy pomiar czasu wykonania nastêpuj¹cych czynnoœci:
\begin{enumerate}
\item Przes³anie pakietu danych o zadanej d³ugoœci z terminalu mobilnego do serwera
\item Odebranie pakietu danych przez serwer
\item Odes³anie identycznego pakietu danych do terminala mobilnego
\item Odebranie pakietu danych w terminalu mobilnym
\end{enumerate}

\qquad Przygotowana aplikacja na system operacyjny Android posiada mo¿liwoœæ wyœwietlenia wykresu prezentuj¹cego czasy transmisji zarejestrowane w czasie pomiaru. Ponadto, wszystkie pomiary s¹ zapisywane w postaci pliku .csv w pamiêci telefonu, co pozwala na ich póŸniejsz¹ analizê z wykorzystaniem innych narzêdzi.

\subsection{Cechy charakterystyczne programowania urz¹dzeñ z systemem Android}

\qquad Android jest systemem operacyjnym z j¹drem Linux przeznaczonym dla urz¹dzeñ mobilnych takich jak telefony komórkowe, smartfony, tablety oraz przyk³adowo w inteligentnych telewizorach (technologia Android TV). Obecnie jest to najbardziej popularny system operacyjny na telefony komórkowe (dane na rok 2015), a w mowie potocznej okreœlenie "smartfon" jest uto¿samianie z telefonem z panelem dotykowym, na którym zainstalowany jest system operacyjny Android.

\qquad Android jest rozwi¹zaniem typu Open Source\cite{[9]}, co oznacza, ¿e jego kod Ÿród³owy jest powszechnie dostêpny. Jest to jeden z elementów otwartej polityki aktualnego w³aœciciela systemu operacyjnego Android - firmy Google, która rozwija Androida jako otwart¹ platformê zarówno dla programistów jak i dla u¿ytkowników.

\qquad Najczêœciej u¿ywanym œrodowiskiem programistycznym do pisania aplikacji na system operacyjny Android jest program Android Studio, przedstawiony na rysunku \ref{fig:android_studio}. Œrodowisko te jest dostêpne na systemy operacyjne Windows, Mac OS X oraz Linux i stanowi one kompletn¹ platformê programistyczn¹ dla potrzeb tworzenia aplikacji na Androida.

\qquad Zarówno system operacyjny Android jak i œrodowisko Android Studio wymagaj¹ zainstalowanego œrodowiska do programowania w jêzyku Java, ze wzglêdu na to, ¿e jest to g³ówny jêzyk programowania wykorzystywany na tej platformie. Istniej¹ rozwi¹zania pozwalaj¹ce kompilowaæ i uruchamiaæ kod napisany w innych jêzykach (np. Objective-C lub JavaScript) na platformie Android, jednak zaleca siê tworzenie aplikacji w jêzyku Java, ze wzglêdu na najlepsze wsparcie ze strony firmy Google.

\begin{figure}[!htbp]
	\centering
\includegraphics[scale=0.3,natwidth=1920,natheight=1040]{android_studio.png}
	\caption{Tworzenie aplikacji na system operacyjny Android w œrodowisku Android Studio}
	\label{fig:android_studio}
\end{figure}

\qquad Poza œrodowiskiem programistycznym, Android Studio zawiera tak¿e wizualny edytor s³u¿¹cy do przygotowania wygl¹du aplikacji, a tak¿e wbudowany emulator, który pozwala na przetestowanie powstaj¹cej aplikacji na ró¿nych typach urz¹dzeñ (np. tablety o ró¿nych przek¹tnych ekranu) bez koniecznoœci zakupu sprzêtu. 


\subsection{Opis aplikacji pe³ni¹cej funkcjê serwera na komputer PC}
\begin{figure}[!htbp]
	\centering
\includegraphics[scale=1,natwidth=549,natheight=332]{server_source_code.png}
	\caption{Kod Ÿród³owy serwera odbieraj¹cego i nadaj¹cego przy pomocy zapytañ HTTP}
	\label{fig:server_source_code}
\end{figure}

\qquad Rysunek \ref{fig:server_source_code} przedstawia kod Ÿród³owy jednego z dwóch programów, które powsta³y w celu odbierania pakietów od terminala mobilnego, a nastêpnie odsy³ania ich z powrotem. Zosta³ on napisany w jêzyku programowania Python, który jest jêzykiem skryptowym znajduj¹cym szerokie zastosowania w serwerach, przetwarzaniu danych, a nawet sztucznej inteligencji. 

\qquad W programie tym skorzystano z biblioteki o nazwie Flask (ang. \textit{fiolka}), która w prosty sposób pozwala na realizacje obs³ugi zapytañ HTTP. Jak widaæ, po¿¹dany efekt, którym by³o odes³anie do terminala mobilnego przes³anych przez niego danych, uda³o siê uzyskaæ za pomoc¹ zaledwie kilkunastu linii kodu. 

\qquad Zasada dzia³ania tego programu pe³ni¹cego funkcjê serwera HTTP jest nastêpuj¹ca: je¿eli do serwera dotrze zapytanie typu POST, odeœlij przes³ane dane do nadawcy, w przeciwnym przypadku odeœlij tekst 'Hello World!' (ang. \textit{Witaj Œwiecie!}), co pozwala w prosty sposób przetestowaæ czy serwer dzia³a poprawnie, oraz czy dany komputer b¹dŸ terminal mobilny mo¿e siê z nim po³¹czyæ.

\begin{figure}[!htbp]
	\centering
\includegraphics[scale=0.8,natwidth=634,natheight=778]{server_socket_source_code.png}
	\caption{Kod Ÿród³owy serwera odbieraj¹cego i nadaj¹cego pakiety protoko³u TCP}
	\label{fig:server_socket_source_code}
\end{figure}

\qquad Rysunek \ref{fig:server_socket_source_code} przedstawia kod Ÿród³owy programu pe³ni¹cego funkcjê serwera wysy³aj¹cego i odbieraj¹cego pakiety TCP. Podobnie jak poprzedni program-serwer, zosta³ on napisany w jêzyku programowania Python, ze wzglêdu na prostotê implementacji i szerok¹ gamê gotowych do u¿ycia bibliotek. 

\qquad Poprzednio wspomniania biblioteka do obs³ugi zapytañ HTTP jak¹ jest Flask nie posiada mo¿liwoœci obs³ugi transmisji pakietów TCP. Ze wzglêdu na to, zdecydowano siê na zastosowanie biblioteki o nazwie socket (ang. \textit{gniazdo}). Pozwala ona na utworzenie tzw. gniazda po stronie serwera, do którego terminal mobilny mo¿e wysy³aæ pakiety protoko³u TCP. 

\qquad Wysy³aj¹c pakiety TCP koneiczne jest okreœlenie rozmiaru pakietu w bajtach. Program oczekuje, ¿e wœród przesy³anych danych pojawi siê sekwencja PACKET\_SIZE:N (ang. \textit{Rozmiar pakietu}), gdzie N jest rozmiarem pakietu danych. Nastêpnie program (tak d³ugo, jak wysy³ane s¹ dane) odbiera pakiety o zadanej d³ugoœci i odsy³a je z powrotem do terminala, który je nada³. W momencie, w którym terminal mobilny przestaje wysy³aæ dane, serwer pozostaje w czuwaniu i czeka na kolejne pakiety do transmisji.

\qquad Zarówno program pe³ni¹cy funkcjê serwera dla zapytañ HTTP jak i serwer transmituj¹cy pakiety TCP mo¿na uruchomiæ na ka¿dym komputerze z systemem Windows, Linux lub OSX na którym zainstalowany zosta³ jêzyk programowania Python i biblioteka Flask.

\subsection{Opis aplikacji na smartfon z systemem Android}
\begin{figure}[h]
	\centering
\includegraphics[scale=0.35,natwidth=540,natheight=960]{main_screen.jpg}
	\caption{G³ówny ekran aplikacji}
	\label{fig:main_screen_android}
\end{figure}

\qquad Aplikacja na smartfon z systemem Android zosta³a przygotowana w œrodowisku Android Studio w wersji 1.3.1 i zaimplementowana w jêzyku programowania Java. Aplikacja zosta³a napisana wspieraj¹c wersje systemu operacyjnego Android pocz¹wszy od 4.0.0, co w praktyce oznacza, ¿e ponad 94\% telefonów z systemem Android jest w stanie j¹ poprawnie uruchomiæ. Dane te potwierdza rysunek \ref{fig:android_device_support}.

\begin{figure}[h]
	\centering
\includegraphics[scale=1,natwidth=563,natheight=93]{android_device_support.png}
	\caption{Wsparcie sprzêtowe aplikacji na system Android}
	\label{fig:android_device_support}
\end{figure}

\qquad Rysunek \ref{fig:main_screen_android} przedstawia g³ówny ekran aplikacji napisanej na system Android. Aplikacja ta zosta³a nazwana \textit{Android Ping!}, co podkreœla fakt, ¿e jej dzia³anie zbli¿one jest do programu \textit{ping} z systemów Unixowych. Przed rozpoczêciem pomiaru, aplikacja prosi u¿ytkownika o podanie nastêpuj¹cych danych:

\begin{itemize}
  \item Adresu IP serwera - jest to komputer, na którym uruchomiona jest jedna z dwóch aplikacji pe³ni¹cych funkcjê serwera opisanych w poprzednim rozdziale
  \item Numer portu
  \item Iloœæ pakietów, które zostan¹ przes³ane w trakcie pomiaru
  \item Rozmiar pojedyñczego pakietu w bajtach
  \item Czas pomiêdzy kolejnymi transmisjami pakietów (w sekundach)
  \item Typ protoko³u, za poœrednictwem którego bêdzie realizowana transmisja - dostêpne opcje to TCP oraz HTTP.
\end{itemize}

\qquad W prawym górnym rogu aplikacji znajduje siê przycisk \textit{NETWORK SETTINGS} (ang. \textit{Ustawienia sieci}), który przenosi u¿ytkownika do ekranu ustawieñ systemu operacyjnego dotycz¹cego ustawieñ sieci komórkowej. Przyk³adowy ekran ustawieñ sieci komórkowej w systemie Android (w telefonie Samsung Galaxy S4) przedstawia rysunek \ref{fig:network_settings_android}. Dziêki dostêpowi do tego okna u¿ytkownik mo¿e przeprowadzaæ pomiary nastêpuj¹cych sieci:

\begin{itemize}
  \item LTE/WCDMA/GSM (automatyczne po³¹czenie)
  \item WCDMA/GSM (automatyczne po³¹czenie)
  \item Tylko WCDMA
  \item Tylko GSM
\end{itemize}

\begin{figure}[h]
	\centering
\includegraphics[scale=0.35,natwidth=540,natheight=960]{network_settings.jpg}
	\caption{Ustawienia sieci komórkowej w systemie Android}
	\label{fig:network_settings_android}
\end{figure}

\qquad Po ustawieniu parametrów pomiaru i wciœniêciu przycisku \textit{START MEASURING} (ang. \textit{rozpocznij pomiar}) aplikacja przechodzi do ekranu pomiaru (rysunek \ref{fig:measurement_screen_android}). W jego centralnym punkcie (zak³adajac, ¿e u¿ytkownik ma w³¹czon¹ us³ugê nawigacji w telefonie) znajduje siê mapa pochodz¹ca od us³ugi Google Maps przedstawiaj¹ca aktualne po³o¿enie terminala mobilnego.

\qquad W trakcie trwania pomiaru terminal mobilny mo¿e zmieniæ swoj¹ pozycjê - jest ona oznaczana w trakcie kolejno dodawanych do mapy punktów. Ka¿dy punkt oznacza pomiar dokonany w danym miejscu, a jego kolor oznacza czas transmisji danego pakietu - barwa jaœniejsza oznacza szybszy czas transmisji, barwa ciemniejsza, wolniejszy. Dziêki temu rozwi¹zaniu, w trakcie trwania pomiaru istnieje mo¿liwoœc œledzenia pozycji terminala mobilnego i wykonywania pomiarów w trakcie np. podró¿y samochodem lub poci¹giem. 

\begin{figure}[h]
	\centering
\includegraphics[scale=0.35,natwidth=540,natheight=960]{measurement_screen.jpg}
	\caption{Ekran pomiaru}
	\label{fig:measurement_screen_android}
\end{figure}

\qquad Pod map¹ znajduj¹ siê informacje na temat biê¿¹cego pomiaru takie jak:

\begin{itemize}
  \item Iloœæ pakietów, które zostan¹ przes³ane w trakcie bie¿¹cego pomiaru
  \item Numer aktualnie przesy³anego pakietu
  \item Œredni czas przesy³u pakietu dla aktualnego pomiaru
\end{itemize}

\qquad Po zakoñczeniu pomiaru u¿ytkownik mo¿e zobaczyæ œredni czas transferu pakietu dla uprzednio ustalonych parametrów, a tak¿e u¿yæ przycisku \textit{RESULTS} (ang. \textit{wyniki}), aby zobaczyæ wykres obrazuj¹cy w jaki sposób zmienia³y siê czasy przesy³u poszczególnych pakietów. Przyk³ad takiego wykresu obrazuje rysunek \ref{fig:results_android}.

\begin{figure}[h]
	\centering
\includegraphics[scale=0.35,natwidth=540,natheight=960]{results.jpg}
	\caption{Ekran pomiaru}
	\label{fig:results_android}
\end{figure}

\subsection{Opis realizacji programowej transmisji z wykorzystaniem zapytañ HTTP}

\qquad Rysunek \ref{fig:http_requests_android} przedstawia sposób realizacji programowej transmisji z wykorzystaniem zapytañ HTTP. Pokazuje on funkcjê \textit{performHttpRequests()} (ang. \textit{wykonajZapytaniaHttp()}), która odpowiada za realizacje transmisji za pomoc¹ protoko³u HTTP.

\begin{figure}[h]
	\centering
\includegraphics[scale=0.5,natwidth=779,natheight=739]{http_requests_source.png}
	\caption{Realizacja programowa transmisji z wykorzystaniem zapytañ HTTP}
	\label{fig:http_requests_android}
\end{figure}

\qquad Na pocz¹tku definicji tej funkcji tworzone s¹ funkcje pomocnicze, które s¹ wykonywane w przypadku poprawnego przesy³u pakietu lub b³êdu (odpowiednio: \textit{successHandler} oraz \textit{errorHandler}). W przypadku b³êdu wyœwietlany jest odpowiedni komunikat, w przypadku poprawnej transmisji wykonwane s¹ funkcje odpowiedzialne za aktualizacje wyników i wyœwietlenia aktualnego œredniego czasu transmisji na ekranie.

\qquad Sama transmisja odbywa siê za pomoc¹ obiektu \textit{stringRequest}, który odpowiada za wysy³anie zapytañ POST protoko³u HTTP, do³¹czaj¹c do parametrów tego zapytania zarówno unikalny identyfikator czasowy jak i losowo wygenerowane dane o zadanym przez u¿ytkownika rozmiarze. Ka¿de takie zapytanie otrzymuje najwy¿szy mo¿liwy priorytet (\textit{Priority.IMMEDIATE} - ang. \textit{natychmiast}), co gwarantuje najszybszy mo¿liwy czas startu transmisji danego pakietu.

\qquad Ostatnia linia tworzy tzw. kolejkê zapytañ co oznacza, ¿e dana transmisja za poœrednictwem zapytania HTTP bêdzie dodawana na kolejkê po up³yniêciu interwa³u okreœlony przez u¿ytkownika w trakcie ustalania parametrów pomiaru. Przyk³adowo, ustawienie czasu pomiêdzy pakietami na 5 sekund spowoduje dodanie nowego pakietu na kolejkê po up³ywie 5 sekund od poprzednio wys³anego pakietu.


\subsection{Opis realizacji programowej transmisji pakietów poprzez protokó³ TCP/IP}

\qquad Rysunek \ref{fig:tcp_requests_android} przedstawia definicjê klasy \textit{SocketRequestTask}, która jest sercem realizacji programowej transmisji pakietów poprzez protokó³ TCP/IP. Klasa ta dziedziczy po wbudowanej w system operacyjny Android klasie \textit{AsyncTask}. Klasa \textit{AsyncTask} pozwala na realizacje asynchronicznych zadañ wykonuj¹cych siê w tle bez blokowania g³ównego w¹tku aplikacji. Dziêki czemu istnieje mo¿liwoœc wysy³ania i odbierania pakietów TCP bez przerywania pracy g³ównego w¹tku interfejsu u¿ytkownika.

\begin{figure}[h]
	\centering
\includegraphics[scale=0.5,natwidth=779,natheight=739]{tcp_requests_source.png}
	\caption{Realizacja programowa transmisji poprzez protokó³ TCP/IP}
	\label{fig:tcp_requests_android}
\end{figure}

\qquad Najwa¿niejsz¹ metod¹ klasy \textit{SocketRequestTask} jest przedstawiona na rysunku \ref{fig:tcp_requests_android} metoda \textit{doInBackground} (ang. \textit{Wykonuj w tle}), która okreœla jakie instrukcje maj¹ byæ wykonane w osobnym w¹tku aplikacji bez blokowania w¹tku interfejsu u¿ytkownika. Instrukcje te rozpoczynaj¹ siê od utworzenia obiektu klasy \textit{Socket}. Klasa ta jest czêœci¹ biblioteki standardowej jêzyka Java i pozwala na implementacjê gniazda TCP po stronie klienta. Utworzone w ten sposób gniazdo nale¿y pod³¹czyæ pod strumieñ danych, w tym przypadku jest to kolejny strumieñ z biblioteki standardowej jêzyka Java jakim jest \textit{PrintWriter}.

\qquad Jak wspomniano w rozdziale poœwiêconym aplikacji pe³ni¹cej funkcjê serwera odbieraj¹cego i wysy³aj¹cego pakiety TCP na komputer PC, pierwsze dane jakich spodziewa siê serwer zawieraj¹ ci¹g znaków \textit{PACKET\_SIZE:N} (ang. \textit{ROZMIAR\_PAKIETU:N}), gdzie N okreœla liczbê przesy³anych bajtów danych (okreœlon¹ przez u¿ytkownika w trakcie ustalania parametrów danego pomiaru). Dane te s¹ wysy³ane asynchronicznie, a wiêc wpisanie do strumienia danych \textit{PrintWriter} ci¹gu okreœlaj¹cego rozmiar wysy³anych pakietów powoduje przes³anie tych danych natychmiast na serwer.

\qquad Po ustaleniu rozmiaru wysy³anych pakietów, program zapisuje w pamiêci aktualny czas, co pozwala zmierzyæ i wyœwietliæ czas nadania i odbioru danego pakietu w sieci w g³ównym w¹tku programu. Nastêpnie dane s¹ wysy³ane i tworzony jest bufor odbiorczy klasy \textit{InputStream} (ang. \textit{StrumieñWejœciowy}), który odbiera od serwera dok³adnie ten sam ci¹g danych, który zosta³ wys³any poprzednio. W programie zosta³a zaimplementowana tak¿e obs³uga b³êdów transmisji - w przypadku wyst¹pienia takiego b³êdu, u¿ytkownik zostanie o nim poinformowany stosownym komunikatem.

\subsection{Sposób pomiaru rejestracji czasu przesy³ania pakietu}

\qquad W poprzednich rozdzia³ach opisano w jaki sposób aplikacja na system operacyjny Android wysy³a dane, zarówno za poœrednictwem protoko³u HTTP jak i TCP, do serwera, który je odbiera i wys³a z powrotem do terminalu mobilnego.

\qquad Rysunki \ref{fig:time_measurement_timestamp} oraz \ref{fig:time_measurement_after_receiving_packet} przedstawiaj¹ metodê pomiaru czasu przesy³u pakietu przez sieæ komórkow¹. Przed ka¿dym takim zapytaniem (zarówno za poœrednictwem protoko³u HTTP jak i TCP) pobierany jest aktualny czas (rysunek \ref{fig:time_measurement_timestamp}) systemowy i zapisywany do zmiennej \textit{timeBeforeRequest} (ang. \textit{czasPrzedZapytaniem}). Pozwala to na póŸniejsze porównanie czasu aktualnego (jest to zmienna zawieraj¹ca liczbê sekund, które up³ynê³y od 1 stycznia 1970 roku) z czasem zmierzonym jako czas bezpoœrednio przed wys³aniem pakietu.

\begin{figure}[h]
	\centering
\includegraphics[scale=0.5,natwidth=768,natheight=166]{android_time_measurement_create_timestamp.png}
	\caption{Pobieranie aktualnego czasu przed wys³aniem pakietu}
	\label{fig:time_measurement_timestamp}
\end{figure}

\qquad Po ka¿dym poprawnym odbiorze pakietu wykonywane s¹ funkcje przedstawione na rysunku \ref{fig:time_measurement_after_receiving_packet}. Odpowiadaj¹ one za:

\begin{itemize}
  \item Weryfikacjê numeru aktualnie odebranego pakietu (tj. czy dany pakiet jest ostatnim pakietem w danym pomiarze i nale¿y zaprzestaæ wysy³ania kolejnych pakietów).
  \item Porównanie aktualnego czasu z poprzednio zapisanym czasem sprzed wys³ania pakietu oraz wyznaczenie aktualnego œredniego czasu transferu pakietu przez sieæ komórkow¹
  \item Aktualizacjê wyników wyœwietlanych na ekranie - je¿eli pomiar siê jeszcze nie zakoñczy³ wyœwietlany jest aktualny numer pakietu, iloœæ wysy³anych pakietów oraz œredni czas transferu. W przypadku przes³ania ju¿ okreœlonej przez u¿ytkownika liczby pakietów wyœwietlana jest informacja o zakoñczeniu pomiaru
\end{itemize}
 

\begin{figure}[h]
	\centering
\includegraphics[scale=0.5,natwidth=544,natheight=432]{android_time_measurement.png}
	\caption{Pomiar czasu przesy³ania pakietu po jego odbiorze}
	\label{fig:time_measurement_after_receiving_packet}
\end{figure}

\qquad 

\subsection{Sposób pomiaru po³o¿enia terminala mobilnego}

\newpage
\section{Wyniki pomiarów}
\subsection{Pomiar nieruchomego terminala mobilnego}
\subsection{Pomiar ruchomego terminala mobilnego w œrodowisku miejskim}



\newpage
\begin{thebibliography}{11}
	\bibitem{[1]} \textit{Podstawy cyfrowych systemów telekomunikacyjnych} - Krzysztof Weso³owski, WK£, Warszawa 2006
	\bibitem{[2]} \textit{Systemy radiokomunikacji ruchomej} - Krzysztof Weso³owski, WK£, Warszawa 2006 
	\bibitem{[3]} ród³o internetowe: \textit{"MIMO transmission schemes for LTE and HSPA networks"} \\
	http://www.3gamericas.org/documents/ \\ Mimo\_Transmission\_Schemes\_for\_LTE\_and\_HSPA\_Networks\_June-2009.pdf
	\bibitem{[4]} ród³o internetowe: \textit{Zasiêg sieci trzeciej i czwartej generacji operatora Play} \\
	http://internet.playmobile.pl/maps/
	\bibitem{[5]} ród³o internetowe: \textit{Zasiêg sieci trzeciej i czwartej generacji operatora Orange} \\
	http://zasieg-orange.wp.pl/?ticaid=1c93f
	\bibitem{[6]} ród³o internetowe: \textit{Zasiêg sieci trzeciej i czwartej generacji operatora T-Mobile} \\
	http://www.t-mobile.pl/pl/indywidualni/stali\_klienci/uslugi\_do\_telefonu/mapa\_zasiegu
	\bibitem{[7]} ród³o internetowe: \textit{Zasiêg sieci trzeciej i czwartej generacji operatora Play"} \\
	http://www.plus.pl/mapa\_zasiegu\_plusa
	\bibitem{[8]} ród³o internetowe: \textit{Dokument RFC793 definiuj¹cy protokó³ TCP} \\
	http://tools.ietf.org/html/rfc793
	\bibitem{[9]} ród³o internetowe: \textit{Android Open Source Project} \\
	https://source.android.com/
	
\end{thebibliography}
\end{document}
